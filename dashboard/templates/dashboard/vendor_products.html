{% extends 'dashboard/base.html' %}
{% load static %}
{% block container %}
    <h2>Vendor Products - {{ vendor.full_name }}</h2>
    
    <!-- Dynamic content area -->
    <div class="content-area">
        <div class="table-header">
            <h3>{{ product_type|title }} Products</h3>
            <a href="{% url 'dashboard:add_product' %}?type={{ product_type }}" class="btn btn-primary add-product-btn">Add Product</a>
            <br>
            <br>
        </div>
        {% if products %}
            <table class="table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Price</th>
                        <th>Discount</th>
                        <th>Availability</th>
                        <th>Stock</th>
                        <th>SKU</th>
                        <th>Size</th>
                        <th>Brand</th>
                        <th>Categories</th>
                        <th>Features</th>
                        <th>Image</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for product in products %}
                    <tr>
                        <td>{{ product.name }}</td>
                        <td>{{ product.description|default:'N/A' }}</td>
                        <td>{{ product.price }}</td>
                        <td>{{ product.discount|default:'N/A' }}</td>
                        <td>{{ product.availability|default:'N/A' }}</td>
                        <td>{{ product.stock|default:'N/A' }}</td>
                        <td>{{ product.sku|default:'N/A' }}</td>
                        <td>{{ product.size.name|default:'N/A' }}</td>
                        <td>{{ product.brand.name|default:'N/A' }}</td>
                        <td>{{ product.categories.name|default:'N/A' }}</td>
                        <td>{{ product.features|default:'N/A' }}</td>
                        <td>
                            {% if product.image %}
                                <img src="{{ product.image.url }}" alt="{{ product.name }}" style="max-width: 100px; height: auto;">
                            {% else %}
                                N/A
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'dashboard:edit_product' product.id %}?type={{ product_type }}" class="btn btn-sm btn-warning">Edit</a>
                            <form action="{% url 'dashboard:remove_product' product.id %}?type={{ product_type }}" method="post" style="display: inline;">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to remove this product?');">Remove</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>No {{ product_type }} products available.</p>
        {% endif %}
    </div>

    <style>
        .content-area {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
            table-layout: auto; /* Allows columns to adjust based on content */
        }
        .table th, .table td {
            padding: 8px;
            border: 1px solid #ddd;
            text-align: left;
            vertical-align: middle;
        }
        .table th {
            background-color: #f5f5f5;
            font-weight: bold;
        }
        .table img {
            display: block;
            margin: 0 auto;
        }
    </style>
{% endblock container %}